编号：

版本号：

受控状态：

密级：

【组织名称】代码人工审查规范

**版权声明和保密须知**

本文件中出现的任何文字叙述、文档格式、插图、照片、方法、过程等内容，除另有特别注明，版权均属【组织名称】所有，受到有关产权及版权法保护。任何单位和个人未经【组织名称】的书面授权许可，不得复制或引用本文件的任何片断，无论通过电子形式或非电子形式。

**Copyright@2025【组织名称】 版权所有**

文档信息

  ------------------------------------------------------------------------
  文档编号：                              文档分类：
  --------------------- ----------------- --------------------------------
  编写：                审核：            批准：

  初次发布日期：        生效日期：        修订日期：
  ------------------------------------------------------------------------

版本记录

  -----------------------------------------------------------------------
   **版本号**    **版本日期**    **修改**    **审批人**      **备注**
  ------------- --------------- ----------- ------------- ---------------
                                                          

                                                          

                                                          

                                                          

                                                          

                                                          

                                                          

                                                          
  -----------------------------------------------------------------------

# 目录 {#目录 .TOC-Heading}

[一、目的 [3](#一目的)](#一目的)

[二、适用对象 [3](#二适用对象)](#二适用对象)

[三、审查范围 [3](#三审查范围)](#三审查范围)

> [（一）完整性审查 [3](#一完整性审查)](#一完整性审查)
>
> [（二）一致性审查 [4](#二一致性审查)](#二一致性审查)
>
> [（三）正确性审查 [5](#三正确性审查)](#三正确性审查)
>
> [（四）健壮性审查 [6](#四健壮性审查)](#四健壮性审查)
>
> [（六）结果性审查 [7](#六结果性审查)](#六结果性审查)
>
> [（七）可理解性审查 [7](#七可理解性审查)](#七可理解性审查)
>
> [（八）可验证性审查 [8](#八可验证性审查)](#八可验证性审查)
>
> [（九）安全性审查 [9](#九安全性审查)](#九安全性审查)

[四、审查形式 [11](#四审查形式)](#四审查形式)

> [（一）交叉审查（日常审查）
> [11](#一交叉审查日常审查)](#一交叉审查日常审查)
>
> [（二）集中审查（核心模块审查）
> [12](#二集中审查核心模块审查)](#二集中审查核心模块审查)
>
> [（三）追溯审查（事后审查）
> [12](#三追溯审查事后审查)](#三追溯审查事后审查)

[五、审查流程 [13](#五审查流程)](#五审查流程)

> [（一）审查准备阶段 [13](#一审查准备阶段)](#一审查准备阶段)
>
> [（二）审查执行阶段 [14](#二审查执行阶段)](#二审查执行阶段)
>
> [（三）问题整改与重审阶段
> [15](#三问题整改与重审阶段)](#三问题整改与重审阶段)
>
> [（四）审查通过与代码合并阶段
> [15](#四审查通过与代码合并阶段)](#四审查通过与代码合并阶段)
>
> [（五）审查结果归档阶段
> [16](#五审查结果归档阶段)](#五审查结果归档阶段)

[六、实施细则 [16](#六实施细则)](#六实施细则)

> [（一）审查责任界定 [16](#一审查责任界定)](#一审查责任界定)
>
> [（二）审查时间要求 [17](#二审查时间要求)](#二审查时间要求)
>
> [（三）审查工具支持 [17](#三审查工具支持)](#三审查工具支持)

# 一、目的

为建立标准化的代码人工审查机制，从源头提升代码质量，降低软件系统因代码缺陷引发的功能故障、安全漏洞及性能问题，同时促进团队内部代码风格统一、技术经验共享，保障软件项目开发进度与交付质量，特制定本规范。本规范旨在通过系统化的人工审查流程，提前发现代码中的潜在风险，减少后期测试与维护成本，确保软件产品符合业务需求、技术标准及行业合规要求。

# 二、适用对象

本规范适用于企业内部所有软件开发项目，包括新开发项目、现有项目的迭代升级（含功能新增、bug
修复、性能优化）、第三方代码接入（如开源组件二次开发、外部合作方提供的代码模块）等场景。

# 三、审查范围

## （一）完整性审查

1.  功能覆盖完整性：检查代码是否完整实现需求文档（PRD）中所有功能点，包括主功能、辅助功能及异常场景处理（如用户注册功能需覆盖
    "手机号注册""邮箱注册""验证码过期处理""注册失败提示"
    等所有场景，无功能遗漏）。

2.  业务流程完整性：关键业务流程（如订单生成 - 支付 - 发货 -
    售后）的代码逻辑是否连贯，无流程断层（如订单支付成功后，未触发
    "库存扣减""订单状态更新"
    的关联逻辑）；是否覆盖业务流程中的所有分支（如支付流程需包含
    "支付成功""支付失败""支付超时""退款" 等分支场景）。

3.  接口与参数完整性：前后端交互接口是否包含需求约定的所有字段（如用户登录接口需返回
    "用户 ID""token""用户角色"，无字段缺失）；函数 /
    方法的参数是否完整，无必填参数遗漏（如计算商品总价的函数，需包含
    "商品单价""购买数量""折扣率" 参数，避免因参数缺失导致计算错误）。

## （二）一致性审查

1.  代码风格一致性：同一项目内代码风格是否统一，包括命名规则（如变量统一使用驼峰命名法，避免部分用驼峰、部分用下划线）、代码格式（如缩进统一为
    4 个空格，函数间空 1
    行，无随意缩进或换行）、注释格式（如函数注释统一使用 "/\*\* 注释内容
    \*/" 格式，避免混合使用 "//" 单行注释）。

2.  接口协议一致性：前后端交互的接口协议是否统一，包括请求方式（如查询类接口用
    GET、提交类接口用 POST，无随意混用）、数据格式（如返回数据统一为
    JSON 格式，字段命名统一为小写字母 + 下划线，避免部分接口返回
    JSON、部分返回 XML）、状态码定义（如 "200" 统一表示成功、"400"
    表示参数错误，无自定义状态码混乱）。

3.  业务逻辑一致性：同类业务场景的代码逻辑是否一致，如 "用户身份校验"
    逻辑需在所有涉及权限的接口（登录、订单提交、个人信息修改）中统一实现，避免部分接口校验、部分接口未校验；数据计算逻辑（如商品折扣计算、税费计算）需在全系统统一算法，避免不同模块计算规则差异导致数据不一致。

## （三）正确性审查

1.  功能逻辑正确性：代码实现的逻辑是否与需求预期一致，无逻辑错误（如
    "判断用户是否为会员" 的逻辑，需是 "会员到期时间≥当前时间"，避免写成
    "会员到期时间＜当前时间"）；关键计算逻辑（如商品总价 = 单价 × 数量
    ×(1 - 折扣率)）是否正确，无计算错误（如误将 "乘法" 写成 "加法"）。

2.  数据处理正确性：数据存储、传输、转换过程中是否保持正确，如用户输入的
    "手机号" 在存储前需验证格式（11
    位数字），避免存储无效数据；数据格式转换（如字符串转数字、日期格式转换）是否正确，无转换异常（如将
    "2024-13-01" 错误转换为有效日期）。

3.  依赖调用正确性：调用第三方接口、开源库或内部工具类时，是否正确使用接口参数与返回值（如调用支付接口时，"金额"
    参数需按要求传入 "分" 为单位的整数，避免传入 "元"
    为单位的小数导致支付失败）；是否正确处理依赖返回的异常（如调用短信接口返回
    "发送失败" 时，需触发重试逻辑，避免直接忽略异常）。

## （四）健壮性审查

1.  异常处理健壮性：代码是否全面处理可能的异常，包括运行时异常（如空指针异常、数组越界）、业务异常（如
    "库存不足""余额不足"）、外部依赖异常（如数据库连接失败、接口调用超时）；异常处理是否合理，避免直接捕获所有异常后不处理（如
    "try {...} catch (Exception e)
    {}"），需记录日志并返回明确的错误提示（如
    "数据库连接失败，请稍后重试"）。

2.  边界条件健壮性：是否处理数据边界值（如 "购买数量" 需限制
    "≥1""≤100"，避免输入 "0" 或 "1000"
    导致业务异常）、流程边界场景（如订单支付超时后，需自动触发
    "订单取消""库存回滚"
    逻辑，避免订单状态异常）；是否处理并发边界（如多用户同时抢购同一商品时，需用锁机制避免超卖，确保库存数据准确）。

3.  资源管理健壮性：是否正确管理系统资源，如数据库连接、文件流、网络连接使用后是否关闭（如
    Java 中 "try-with-resources"
    关闭流，避免资源泄漏）；缓存、线程池等资源是否合理配置容量（如缓存最大容量设置，避免缓存无限增长导致内存溢出；线程池核心线程数配置，避免线程过多导致
    CPU 占用过高）。

## （六）结果性审查

1.  功能输出正确性：代码执行后的输出结果是否符合预期，如调用
    "计算商品总价" 函数，输入 "单价 100 元、数量 2、折扣
    0.8"，输出结果需为 "160
    元"，无计算偏差；接口返回结果是否正确，如用户登录成功后，返回的
    "token" 需能正常用于后续接口调用，无无效 token。

2.  数据一致性结果：代码执行后是否保证数据一致性，如订单支付成功后，需同时更新
    "订单状态为已支付""库存扣减""用户余额扣减"，避免出现
    "订单已支付但库存未扣减"
    的数据不一致情况；批量操作（如批量导入用户数据）需支持事务，确保部分数据导入失败时，已导入数据回滚，无数据残留。

3.  性能结果达标性：代码执行性能是否达标，如查询用户列表接口响应时间需≤500ms，无因
    SQL 未加索引导致响应时间超
    2s；高并发场景下（如秒杀活动），代码是否能支撑预期并发量（如支持
    1000QPS，无因线程阻塞导致服务崩溃），执行结果无超时、无数据丢失。

## （七）可理解性审查

1.  命名可理解性：变量、函数、类、常量的命名是否直观易懂，能直接反映其含义，避免模糊命名（如用
    "userMobile" 替代 "um"，用 "calculateTotalPrice" 替代
    "calcPrice"，用 "MAX_ORDER_QUANTITY" 替代
    "MAX_NUM"）；无歧义命名（如 "getUser" 函数需明确是
    "获取当前登录用户" 还是 "获取指定 ID
    用户"，避免命名模糊导致理解偏差）。

2.  注释可理解性：核心代码是否包含清晰的注释，函数注释需说明
    "功能用途、输入参数含义、返回值含义、异常场景"（如 "/\*\*
    计算商品总价 \* \@param price 商品单价（元） \* \@param quantity
    购买数量 \* \@return 总价（元） \* \@throws IllegalArgumentException
    当单价≤0 或数量≤0 时抛出
    \*/"）；复杂逻辑（如多分支判断、算法实现）需添加行内注释，解释设计思路（如
    "// 此处用二分查找优化查询效率，因商品列表已排序"）。

3.  结构可理解性：代码结构是否清晰，是否按 "功能 / 业务" 分层（如后端按
    "Controller（接口层）-Service（业务层）-Dao（数据层）" 分层，前端按
    "组件（Component）- 页面（Page）- 工具（Utils）" 分层）；是否避免
    "大函数 / 大类"（如一个函数代码行数超 500
    行，需拆分为多个小函数，每个函数负责单一功能，便于理解）。

## （八）可验证性审查

1.  单元测试可验证性：代码是否便于编写单元测试，如函数是否为纯函数（输入确定则输出确定，无依赖外部状态），避免函数依赖全局变量、静态方法（如
    "calculateTotalPrice" 函数仅依赖输入参数，无依赖
    "全局订单对象"，便于编写单元测试用例）；是否预留测试接口或测试数据入口（如提供
    "测试模式开关"，便于模拟异常场景（如模拟支付失败）进行测试）。

2.  日志可验证性：代码是否打印关键日志，包括输入输出日志（如接口调用时打印
    "请求参数：xxx，返回结果：xxx"）、异常日志（如捕获异常时打印
    "异常信息：xxx，发生位置：xxx"）、业务关键节点日志（如订单支付成功时打印
    "订单
    ID：xxx，支付金额：xxx，支付时间：xxx"）；日志格式是否规范，包含
    "时间戳、日志级别、模块名、具体信息"，便于通过日志追溯代码执行过程，验证功能正确性。

3.  调试可验证性：代码是否便于调试，如关键变量是否可通过调试工具查看（避免变量定义为
    "private" 且无 getter
    方法，无法调试查看值）；是否避免复杂嵌套逻辑（如多层 if-else
    嵌套、匿名内部类嵌套，导致调试时难以定位代码执行路径）；是否预留调试标识（如
    "debugMode" 变量，开启后打印详细调试信息，便于定位问题）。

## （九）安全性审查

1.  注入攻击防护：检查是否存在 SQL 注入（如避免直接拼接 SQL 语句 "SELECT
    \* FROM user WHERE username=\'\"+username+\"\'"，需使用参数化查询
    "SELECT \* FROM user WHERE username=?"）、XSS
    注入（如前端对用户输入的 "昵称" 进行 HTML 转义，避免用户输入
    "恶意代码"
    导致页面被攻击）、命令注入（如调用系统命令时，避免直接使用用户输入
    "String cmd = \"ping\" + ip;"，需校验 ip
    格式或使用安全的命令调用方式）。

2.  权限与访问控制：核心功能是否包含权限校验（如 "修改用户信息"
    接口需校验
    "当前用户是否为管理员或本人"，避免普通用户修改他人信息）；是否避免越权访问（如接口
    URL 无权限控制，普通用户可直接访问 "/admin/deleteUser"
    接口删除用户）；是否控制敏感操作频率（如登录接口需限制 "1 分钟内最多
    5 次失败尝试"，避免暴力破解）。

3.  敏感数据保护：敏感数据（密码、银行卡号、身份证号）是否加密存储（如密码使用
    BCrypt 算法哈希加盐存储，避免明文存储；银行卡号存储时只保留后 4
    位，前 12 位用 "\*" 替换）；敏感数据传输是否加密（如通过 HTTPS
    传输，避免 HTTP
    明文传输导致数据被窃取）；是否避免敏感数据泄露（如日志中不打印密码、身份证号，前端页面不展示完整银行卡号）。

4.  依赖与配置安全：第三方依赖（开源库、SDK）是否为安全版本，无已知漏洞（如通过
    NVD、CVE 漏洞库查询，避免使用存在 "远程代码执行漏洞"
    的依赖版本）；配置文件中是否无敏感信息明文（如数据库密码、API
    密钥需加密存储，避免配置文件中直接写"db.password=123456"）；是否关闭生产环境不必要的功能（如关闭生产环境的
    "Swagger 接口文档""DEBUG 模式"，避免暴露接口信息）。

# 四、审查形式

## （一）交叉审查（日常审查）

1.  **适用场景：**项目迭代过程中的常规代码提交（如功能模块开发完成、bug
    修复），审查频率高、范围较小（通常为单个功能点或少量代码文件）。

2.  **实施方式：**开发工程师完成代码编写后，在代码管理工具（如
    GitLab、GitHub、Gitee）上创建 Merge Request（MR）/Pull
    Request（PR），指定 1-2
    名同团队的其他开发工程师作为审查人（审查人需熟悉该模块相关技术栈），审查人在
    1 个工作日内完成审查并反馈意见。

3.  **核心要求：**审查人需逐行查看代码，重点关注功能正确性、安全性与基础规范性，提出具体修改建议（如
    "此处需添加用户 ID 非空校验""SQL
    语句应使用参数化查询避免注入"），代码提交者需根据意见修改后重新提交审查，直至审查通过。

## （二）集中审查（核心模块审查）

1.  **适用场景：**项目核心模块（如支付系统、用户认证系统、数据核心库）的代码审查，或重大功能迭代（如版本升级、架构调整）后的全面审查，审查范围广、复杂度高，需多人协同评估。

2.  **实施方式：**由技术负责人/架构师组织，邀请 3-5
    名核心开发工程师、测试负责人参与，通过会议形式（线下或线上会议）开展审查。会前需将待审查代码、需求文档、设计文档提前
    1
    天分发至参与人员，会议中由代码提交者讲解代码逻辑，审查人员针对关键问题（如架构合理性、性能风险、安全漏洞）进行讨论，形成书面审查报告。

3.  **核心要求：**审查需形成明确结论（通过、需修改后重审、需重新设计），对于
    "需修改" 的问题，需明确责任人与整改期限，技术负责人跟踪整改结果。

## （三）追溯审查（事后审查）

1.  **适用场景：**线上出现严重
    bug（如功能故障、安全事件）后，对相关代码进行追溯性审查，分析问题根源，避免同类问题重复发生；或项目交付后，对历史代码进行抽样审查，总结代码质量问题并优化审查流程。

2.  **实施方式：**由技术负责人牵头，联合问题涉及模块的开发工程师、测试工程师，调取线上问题相关的代码版本（通过代码管理工具的历史提交记录），复盘代码实现过程，分析问题产生的原因（如
    "未处理空指针异常""权限校验逻辑缺失"），形成《代码问题追溯报告》，并更新至团队知识库。

3.  **核心要求：**追溯审查需聚焦 "问题预防"，不仅要修复当前
    bug，还需梳理同类代码场景，补充审查 checklist，完善团队编码规范。

# 五、审查流程

### **（一）审查准备阶段**

1.  代码提交者完成代码编写后，需先进行自我审查：对照本规范的审查范围，检查代码的功能正确性、基础规范性（如命名、格式），并通过本地单元测试（覆盖率不低于
    80%）、调试工具验证代码可正常运行，排除明显缺陷。

2.  在代码管理工具（如 GitLab）上创建
    MR/PR，填写提交说明，明确以下信息：待审查代码对应的需求编号、功能模块名称、核心修改点（如
    "新增用户注册功能，修改文件：UserController.java、UserService.java"）、是否涉及数据库变更（如
    SQL 脚本路径）、自测情况（如
    "已通过单元测试，测试场景：正常注册、手机号已存在、密码不符合规则"）。

3.  根据代码模块的重要性，指定审查人：普通模块指定 1
    名同团队开发工程师；核心模块（如支付、认证）需同时指定技术负责人 /
    架构师作为审查人，确保审查深度。

### **（二）审查执行阶段**

1.  审查人收到 MR/PR 通知后，需在规定时间内（日常审查 1
    个工作日，核心模块审查 2
    个工作日）启动审查，通过代码管理工具在线查看代码，或拉取代码至本地运行验证（如需测试功能逻辑）。

2.  审查人对照《代码审查
    checklist》（见附件），逐项检查代码，对发现的问题进行分类标注：

3.  阻断性问题：影响功能正常运行、存在严重安全漏洞（如 SQL
    注入）、违反核心架构设计的问题，需标记为
    "必须修改"，代码提交者需优先整改；

4.  非阻断性问题：代码可读性差、存在性能优化空间、轻微规范性问题（如注释不完整），需标记为
    "建议修改"，代码提交者可结合开发进度协商整改时间；

5.  无问题：代码符合规范要求，标记为 "审查通过"。

6.  审查人需在 MR/PR 评论区详细说明问题位置（如 "UserController.java 第
    58 行"）、问题描述（如
    "未校验用户手机号格式，可能导致无效数据入库"）及修改建议（如 "使用
    RegexUtils
    工具类校验手机号格式，不符合时抛出参数异常"），避免模糊表述。

### **（三）问题整改与重审阶段**

1.  代码提交者收到审查意见后，需在 1-2
    个工作日内完成问题整改（阻断性问题需 24 小时内整改），整改完成后在
    MR/PR 中回复审查人，并标记 "已修改，请重新审查"。

2.  对于审查意见有异议的（如认为审查人对需求理解偏差），代码提交者需主动与审查人沟通，必要时邀请技术负责人参与仲裁，明确是否需要修改，避免因沟通不畅延误审查进度。

3.  审查人收到重审请求后，需在 1
    个工作日内验证问题整改情况：若所有阻断性问题已解决、非阻断性问题已协商一致，标记
    "审查通过"；若仍存在未整改的阻断性问题，需再次反馈意见，直至问题全部解决。

### **（四）审查通过与代码合并阶段**

1.  所有审查人标记 "审查通过"
    后，代码提交者方可将代码合并至目标分支（如开发分支、测试分支），合并前需再次确认代码无冲突（通过代码管理工具自动检测冲突，存在冲突时需先解决冲突）。

2.  代码合并后，代码提交者需将 MR/PR
    链接、审查意见截图、整改记录整理至项目文档库，作为代码质量追溯依据；若为核心模块代码，技术负责人需同步将审查结果同步至项目例会，分享典型问题与整改经验。

### **（五）审查结果归档阶段**

1.  每个迭代周期（如 2
    周）结束后，技术负责人需汇总该周期内所有代码审查记录，统计关键指标：审查通过率（通过审查的
    MR/PR 数量 /
    总提交数量）、平均审查时长、阻断性问题数量及类型分布（如安全漏洞占比、功能缺陷占比）。

2.  将审查记录、统计指标、典型问题案例（如 "XX 模块因未做 SQL
    参数化导致注入风险，整改方案为
    XXX"）整理为《代码审查周期报告》，同步至团队所有成员，并更新团队知识库中的《代码质量问题库》，用于后续编码培训与审查规范优化。

# 六、实施细则

## （一）审查责任界定

1.  **代码提交者**：对提交代码的质量负首要责任，需确保代码通过自测、符合提交规范，积极配合审查人完成问题整改，无正当理由不得拒绝合理的审查意见。

2.  **审查人**：对审查结果负审核责任，需认真履行审查职责，避免遗漏严重问题（如安全漏洞），若因审查疏漏导致线上故障，需与代码提交者共同承担责任（具体责任划分可参考企业《技术故障问责制度》）。

3.  **技术负责人**：负责监督审查流程的执行情况，协调审查过程中的争议，定期汇总审查结果并推动团队代码质量提升，对核心模块的审查结果进行最终把关。

## （二）审查时间要求

1.  **日常交叉审查：**代码提交者创建 MR/PR 后，审查人需在1
    个工作日内响应并完成审查；代码提交者需在收到审查意见后1-2
    个工作日内完成整改并提交重审。

2.  **核心模块集中审查：**技术负责人需提前1
    天组织审查会议并分发材料，会议时长控制在1-2
    小时内，审查结论需在会议结束后24 小时内以书面形式反馈。

3.  **追溯审查：**线上故障发生后，需在24 小时内启动追溯审查，3
    个工作日内完成《代码问题追溯报告》并同步至相关人员。

## （三）审查工具支持

1.  **代码管理工具：**使用 GitLab、GitHub、Gitee 等工具实现 MR/PR
    创建、审查意见提交、代码合并等流程，开启 "强制审查通过后才能合并"
    功能，避免未审查代码流入目标分支。

2.  **辅助审查工具：**结合自动化工具提升审查效率，如使用 SonarQube
    检测代码规范性、重复率、潜在 bug；使用 Checkmarx、Fortify
    检测安全漏洞；使用 Jest、JUnit
    等单元测试框架验证代码功能，自动化工具的检测结果可作为人工审查的参考依据，但不得替代人工审查。

3.  **审查 checklist：**技术负责人需根据本规范，制定《代码审查
    checklist》（按前端、后端、数据库分类），明确每类代码的审查要点（如后端代码需检查
    "是否处理空指针异常""SQL 是否参数化"），审查人需对照 checklist
    开展审查，避免遗漏关键项。
